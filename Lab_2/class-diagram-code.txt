Код:
@startuml
title Class Diagram
skinparam classBackgroundColor #FFFFFF
skinparam classBorderColor #333333
skinparam packageStyle rectangle

package "Domain" {
  abstract class FSObject {
    +Name: string
    +Path: string
    +Rename(newName: string): void
  }

  class File {
    +Extension: string
  }

  class Directory {
    +GetChildren(): List<FSObject>
    +Add(obj: FSObject): void
    +Remove(obj: FSObject): void
    +CreateSubdir(name: string): Directory
  }

  class Disk {
    +Letter: string
    +Label: string
  }

  class Selection {
    +Items: List<FSObject>
    +Add(obj: FSObject): void
    +Remove(obj: FSObject): void
    +Clear(): void
    +IsEmpty(): bool
  }

  class SearchCriteria {
    +NameMask: string
    +Extension: string
  }

  FSObject <|-- File
  FSObject <|-- Directory

  Disk *-- "1" Directory : root
  Directory *-- "0..*" FSObject : children
}

package "Application" {
  class FileManagerService {
    +Copy(sel: Selection, target: Directory): void
    +Move(sel: Selection, target: Directory): void
    +Delete(sel: Selection): void
    +Rename(obj: FSObject, newName: string): void
    +CreateFolder(parent: Directory, name: string): Directory
    +Search(c: SearchCriteria): List<FSObject>
    +OpenExternally(file: File): void
  }

  interface IFileSystemGateway {
    +List(path: string): List<FSObject>
    +MakeDir(path: string): Directory
    +Copy(src: FSObject, dstDir: Directory): void
    +Move(src: FSObject, dstDir: Directory): void
    +Remove(obj: FSObject): void
    +Rename(obj: FSObject, newName: string): void
    +OpenWithAssociation(file: File): void
  }

  class SearchService {
    +Find(c: SearchCriteria): List<FSObject>
  }

  FileManagerService ..> IFileSystemGateway : використовує
  FileManagerService ..> SearchService     : пошук
  FileManagerService ..> Selection         : працює з вибором
  FileManagerService ..> Directory
  FileManagerService ..> File

  ' нові залежності:
  SearchService ..> SearchCriteria : використовує
  FileManagerService ..> SearchCriteria : передає умови
}

@enduml
